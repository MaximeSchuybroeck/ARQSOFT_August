<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="533px" preserveAspectRatio="none" style="width:613px;height:533px;background:#FFFFFF;" version="1.1" viewBox="0 0 613 533" width="613px" zoomAndPan="magnify"><title>Phase 2 &#8212; Carve Out Auth First</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="211.6064" x="193.9458" y="25.1074">Phase 2 &#8212; Carve Out Auth First</text></g><!--cluster Edge--><g class="cluster" data-entity="Edge" data-source-line="7" data-uid="ent0003" id="cluster_Edge"><rect fill="none" height="92" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="134" x="117" y="164.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34.2275" x="166.8862" y="182.0989">Edge</text></g><!--cluster Legacy--><g class="cluster" data-entity="Legacy" data-source-line="10" data-uid="ent0005" id="cluster_Legacy"><polygon fill="none" points="225,317.9915,235,307.9915,353,307.9915,353,506.9915,343,516.9915,225,516.9915,225,317.9915" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="343" x2="353" y1="317.9915" y2="307.9915"/><line style="stroke:#181818;stroke-width:1;" x1="225" x2="343" y1="317.9915" y2="317.9915"/><line style="stroke:#181818;stroke-width:1;" x1="343" x2="343" y1="317.9915" y2="516.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48.248" x="260.876" y="336.0989">Legacy</text></g><!--cluster Microservices--><g class="cluster" data-entity="Microservices" data-source-line="14" data-uid="ent0008" id="cluster_Microservices"><polygon fill="none" points="16,317.9915,26,307.9915,185,307.9915,185,506.9915,175,516.9915,16,516.9915,16,317.9915" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="175" x2="185" y1="317.9915" y2="307.9915"/><line style="stroke:#181818;stroke-width:1;" x1="16" x2="175" y1="317.9915" y2="317.9915"/><line style="stroke:#181818;stroke-width:1;" x1="175" x2="175" y1="317.9915" y2="516.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93.3926" x="49.8037" y="336.0989">Microservices</text></g><!--entity Gateway--><g class="entity" data-entity="Gateway" data-source-line="8" data-uid="ent0004" id="entity_Gateway"><rect fill="#F1F1F1" height="38.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.7031" x="133" y="201.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="143" y="227.0989">API Gateway</text></g><!--entity Monolith--><g class="entity" data-entity="Monolith" data-source-line="11" data-uid="ent0006" id="entity_Monolith"><rect fill="#F1F1F1" height="38.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72.917" x="258.5" y="349.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.917" x="268.5" y="375.0989">Monolith</text></g><!--entity MonoDB--><g class="entity" data-entity="MonoDB" data-source-line="12" data-uid="ent0007" id="entity_MonoDB"><path d="M241,462.9915 C241,452.9915 289.1274,452.9915 289.1274,452.9915 C289.1274,452.9915 337.2549,452.9915 337.2549,462.9915 L337.2549,490.6126 C337.2549,500.6126 289.1274,500.6126 289.1274,500.6126 C289.1274,500.6126 241,500.6126 241,490.6126 L241,462.9915" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M241,462.9915 C241,472.9915 289.1274,472.9915 289.1274,472.9915 C289.1274,472.9915 337.2549,472.9915 337.2549,462.9915" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2549" x="251" y="492.0989">Monolith DB</text></g><!--entity Auth--><g class="entity" data-entity="Auth" data-source-line="15" data-uid="ent0009" id="entity_Auth"><rect fill="#F1F1F1" height="38.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.2549" x="52" y="349.9915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2549" x="62" y="375.0989">auth-service</text></g><!--entity AuthDB--><g class="entity" data-entity="AuthDB" data-source-line="16" data-uid="ent0010" id="entity_AuthDB"><path d="M64,462.9915 C64,452.9915 100.0688,452.9915 100.0688,452.9915 C100.0688,452.9915 136.1377,452.9915 136.1377,462.9915 L136.1377,490.6126 C136.1377,500.6126 100.0688,500.6126 100.0688,500.6126 C100.0688,500.6126 64,500.6126 64,490.6126 L64,462.9915" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M64,462.9915 C64,472.9915 100.0688,472.9915 100.0688,472.9915 C100.0688,472.9915 136.1377,472.9915 136.1377,462.9915" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.1377" x="74" y="492.0989">Auth DB</text></g><!--entity Clients--><g class="entity" data-entity="Clients" data-source-line="6" data-uid="ent0002" id="entity_Clients"><path d="M155.716,59.8465 C158.4074,52.5528 163.9079,49.7159 169.9535,56.4397 C171.4601,47.6632 177.9607,46.1685 184.436,51.2453 C190.7878,45.6211 196.5639,45.7573 199.3642,54.8482 C206.6365,48.5952 213.0089,51.4169 213.9028,60.7847 C221.3444,63.7584 222.9469,69.4465 217.0944,75.336 C223.9702,82.2843 221.8222,89.0461 213.1344,92.378 C210.2814,100.7839 204.0243,101.9781 198.2396,95.2665 C196.5115,102.7058 190.0922,105.2231 184.3846,99.4346 C177.8047,105.0739 173.0387,103.7864 170.457,95.4501 C164.5327,100.9735 160.035,99.7744 157.566,92.0801 C147.35,90.8902 144.2246,83.3591 151.022,75.4674 C144.543,67.627 147.6722,63.3228 155.716,59.8465" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.793" x="162.5" y="81.0989">Clients</text></g><g class="entity" data-entity="GMN16" data-source-line="28" data-uid="ent0017" id="entity_GMN16"><path d="M369.5,346.9915 L369.5,391.5735 L606.498,391.5735 L606.498,356.9915 L596.498,346.9915 L369.5,346.9915" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M596.498,346.9915 L596.498,356.9915 L606.498,356.9915 L596.498,346.9915" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.8989" x="375.5" y="366.0198">Central identity provider.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.998" x="375.5" y="383.3108">Issues JWT for downstream services.</text></g><!--link Clients to Gateway--><g class="link" data-entity-1="Clients" data-entity-2="Gateway" data-source-line="19" data-uid="lnk11" id="link_Clients_Gateway"><path d="M156.68,100.0415 C144.48,113.5015 133.87,131.2015 139,148.9915 C144.69,168.7215 153.9547,183.5012 164.4947,197.1612" fill="none" id="Clients-to-Gateway" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="168.16,201.9115,165.8289,192.3425,165.1056,197.9529,159.4951,197.2295,168.16,201.9115" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.6118" x="140" y="145.0198">HTTPS</text></g><!--link Gateway to Clients--><g class="link" data-entity-1="Gateway" data-entity-2="Clients" data-source-line="25" data-uid="lnk15" id="link_Gateway_Clients"><path d="M185.29,201.7715 C186.39,183.4715 187.7,154.8215 187,129.9915 C186.73,120.2315 186.531,115.4606 185.971,106.1706" fill="none" id="Gateway-to-Clients" style="stroke:#0000FF;stroke-width:2;"/><polygon fill="#0000FF" points="185.61,100.1815,182.1588,109.4058,185.9109,105.1724,190.1443,108.9245,185.61,100.1815" style="stroke:#0000FF;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.3208" x="188" y="145.0198">JWT/OAuth2 tokens</text></g><!--link Gateway to Monolith--><g class="link" data-entity-1="Gateway" data-entity-2="Monolith" data-source-line="20" data-uid="lnk12" id="link_Gateway_Monolith"><path d="M232.27,241.1515 C246.95,248.9715 261.86,259.4615 272,272.9915 C288.98,295.6415 293.2745,323.0809 294.4345,343.7909" fill="none" id="Gateway-to-Monolith" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="294.77,349.7815,298.2604,340.5719,294.4904,344.7893,290.2729,341.0192,294.77,349.7815" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.4688" x="283" y="288.0198">/books, /lending, /readers, /authors, /reports</text></g><!--link Gateway to Auth--><g class="link" data-entity-1="Gateway" data-entity-2="Auth" data-source-line="21" data-uid="lnk13" id="link_Gateway_Auth"><path d="M132.96,235.2215 C113.54,242.8215 93.36,254.6915 82,272.9915 C67.32,296.6415 76.3536,324.1165 86.5436,344.4665" fill="none" id="Gateway-to-Auth" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="89.23,349.8315,88.777,339.993,86.9913,345.3606,81.6237,343.575,89.23,349.8315" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.9897" x="83" y="288.0198">/auth/** (login, token, introspect)</text></g><!--link Auth to AuthDB--><g class="link" data-entity-1="Auth" data-entity-2="AuthDB" data-source-line="22" data-uid="lnk14" id="link_Auth_AuthDB"><path d="M100,389.3515 C100,407.1315 100,427.8215 100,446.8715" fill="none" id="Auth-to-AuthDB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="100,452.8715,104,443.8715,100,447.8715,96,443.8715,100,452.8715" style="stroke:#181818;stroke-width:1;"/></g><!--link Auth to GMN16--><g class="link" data-entity-1="Auth" data-entity-2="GMN16" data-source-line="28" data-uid="lnk18" id="link_Auth_GMN16"><path d="M123.28,349.6215 C150.01,328.2315 196.18,295.5115 242.5,282.4915 C282.29,271.3015 295.55,271.9015 335.5,282.4915 C382.35,294.9115 429.83,325.4715 459.09,346.8315" fill="none" id="Auth-GMN16" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/></g><!--link Monolith to MonoDB--><g class="link" data-entity-1="Monolith" data-entity-2="MonoDB" data-source-line="32" data-uid="lnk19" id="link_Monolith_MonoDB"><path d="M293.93,389.3515 C292.92,407.1315 291.7427,427.8313 290.6527,446.8813" fill="none" id="Monolith-to-MonoDB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="290.31,452.8715,294.8176,444.1147,290.5956,447.8796,286.8307,443.6577,290.31,452.8715" style="stroke:#181818;stroke-width:1;"/></g><!--SRC=[LL9DJ-Cm4BtxLup2WGMrLEBO0nAKRorgfLRQ0-BWnfF4gl54zgIeGaZy27xX_f8Tft4NJfcnttkUzp9isI4i6XqHpk7lvnVCTDWYp3k6ouuRkBKXib9nOtshWtw5abvRykXvoJkX1YnP-zhXDqXijA4twskej8keLEceCr3Cd1LUB41766fru4DnOseiu5q1F5yk7k1ECxxftKj23xNwK9wCG7zZhSlT07uYJyvoqoDp8nT6irudOqK-XEkh8eEkhmvgJxOC535iRObn4DLYVZoSzS8fZH-YVJo3OAfxGJNuWl7u8ayDKxXVhHPBbVjqTnXf2fCrqIQEOEBG6qbDge3QO4XdQGxggu0j1Kdikqe_mtIFcfoUmYz7jVKZODgWVAndCTPAn2UgXsQEpAgEOTwo9QyTB9VpFGKQxGrLrVz7de_MhiFHcfnv4NAsDuN7Fwl9F6cTxwbHIPei2s7hXe6g7DXCy47Ui4OAopje0ssb2MTo-H1ZXp5fGKK1P6jyP34lEpJyZZCbeK1ILkgGMGvGRFm3]--></g></svg>