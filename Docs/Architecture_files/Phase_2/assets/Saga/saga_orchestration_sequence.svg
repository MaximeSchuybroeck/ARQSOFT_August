<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1725.6px" preserveAspectRatio="none" style="width:1126px;height:1725px;background:#FFFFFF;" version="1.1" viewBox="0 0 1126 1725" width="1126.4px" zoomAndPan="magnify"><title>Orchestrated Saga - Borrow with Reservation (Happy path + Compensations)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="11.2" font-weight="bold" lengthAdjust="spacing" textLength="409.8117" x="355.1105" y="24.0859">Orchestrated Saga - Borrow with Reservation (Happy path + Compensations)</text><rect fill="none" height="215.6953" style="stroke:#000000;stroke-width:1.2;" width="840.1852" x="272.6477" y="1016.6766"/><rect fill="none" height="315.8266" style="stroke:#000000;stroke-width:1.2;" width="840.1852" x="272.6477" y="1243.5719"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="15.0234" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="17.6" x2="17.6" y1="98.5938" y2="1659.2969"/></g><g><title>Client UI</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="99.9699" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="102.4969" x2="102.4969" y1="98.5938" y2="1659.2969"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="315.7289" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="318.2477" x2="318.2477" y1="98.5938" y2="1659.2969"/></g><g><title>Lending Orchestrator</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="449.9992" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="452.5926" x2="452.5926" y1="98.5938" y2="1659.2969"/></g><g><title>Inventory Service</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="565.0691" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="568.2059" x2="568.2059" y1="98.5938" y2="1659.2969"/></g><g><title>Lending Service</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="667.6922" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="670.7324" x2="670.7324" y1="98.5938" y2="1659.2969"/></g><g><title>Payment Service</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="769.3801" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="771.852" x2="771.852" y1="98.5938" y2="1659.2969"/></g><g><title>RabbitMQ</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="999.5863" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="1002.3781" x2="1002.3781" y1="98.5938" y2="1659.2969"/></g><g><title>Saga Store</title><rect fill="#000000" fill-opacity="0.00000" height="1560.7031" width="6.4" x="1071.2137" y="98.5938"/><line style="stroke:#181818;stroke-width:0.4;stroke-dasharray:5.0,5.0;" x1="1074.3945" x2="1074.3945" y1="98.5938" y2="1659.2969"/></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="23.6469" x="4" y="95.7828">User</text><ellipse cx="18.2234" cy="42.4969" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4;"/><path d="M18.2234,48.8969 L18.2234,70.4969 M7.8234,55.2969 L28.6234,55.2969 M18.2234,70.4969 L7.8234,82.4969 M18.2234,70.4969 L28.6234,82.4969" fill="none" style="stroke:#181818;stroke-width:0.4;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="23.6469" x="4" y="1670.5828">User</text><ellipse cx="18.2234" cy="1680.1938" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4;"/><path d="M18.2234,1686.5938 L18.2234,1708.1938 M7.8234,1692.9938 L28.6234,1692.9938 M18.2234,1708.1938 L7.8234,1720.1938 M18.2234,1708.1938 L28.6234,1720.1938" fill="none" style="stroke:#181818;stroke-width:0.4;"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="54.1461" x="76.0969" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="42.9461" x="81.6969" y="89.3828">Client UI</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="54.1461" x="76.0969" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="42.9461" x="81.6969" y="1676.1828">Client UI</text></g><g class="participant participant-head" data-participant="gw"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="76.5625" x="280.6477" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="65.3625" x="286.2477" y="89.3828">API Gateway</text></g><g class="participant participant-tail" data-participant="gw"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="76.5625" x="280.6477" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="65.3625" x="286.2477" y="1676.1828">API Gateway</text></g><g class="participant participant-head" data-participant="orch"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="116.4133" x="394.9926" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="105.2133" x="400.5926" y="89.3828">Lending Orchestrator</text></g><g class="participant participant-tail" data-participant="orch"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="116.4133" x="394.9926" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="105.2133" x="400.5926" y="1676.1828">Lending Orchestrator</text></g><g class="participant participant-head" data-participant="inv"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="97.7266" x="519.4059" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="86.5266" x="525.0059" y="89.3828">Inventory Service</text></g><g class="participant participant-tail" data-participant="inv"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="97.7266" x="519.4059" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="86.5266" x="525.0059" y="1676.1828">Inventory Service</text></g><g class="participant participant-head" data-participant="lend"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="91.5195" x="625.1324" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="80.3195" x="630.7324" y="89.3828">Lending Service</text></g><g class="participant participant-tail" data-participant="lend"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="91.5195" x="625.1324" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="80.3195" x="630.7324" y="1676.1828">Lending Service</text></g><g class="participant participant-head" data-participant="pay"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="95.8563" x="724.652" y="71.6969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="84.6563" x="730.252" y="89.3828">Payment Service</text></g><g class="participant participant-tail" data-participant="pay"><rect fill="#E2E2F0" height="26.0969" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4;" width="95.8563" x="724.652" y="1658.4969"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="84.6563" x="730.252" y="1676.1828">Payment Service</text></g><g class="participant participant-head" data-participant="mq"><path d="M973.5781,75.6969 L1031.9945,75.6969 C1035.9945,75.6969 1035.9945,87.1453 1035.9945,87.1453 C1035.9945,87.1453 1035.9945,98.5938 1031.9945,98.5938 L973.5781,98.5938 C969.5781,98.5938 969.5781,87.1453 969.5781,87.1453 C969.5781,87.1453 969.5781,75.6969 973.5781,75.6969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.4;"/><path d="M1031.9945,75.6969 C1027.9945,75.6969 1027.9945,87.1453 1027.9945,87.1453 C1027.9945,98.5938 1031.9945,98.5938 1031.9945,98.5938" fill="none" style="stroke:#181818;stroke-width:0.4;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="50.4164" x="973.5781" y="91.7828">RabbitMQ</text></g><g class="participant participant-tail" data-participant="mq"><path d="M973.5781,1658.4969 L1031.9945,1658.4969 C1035.9945,1658.4969 1035.9945,1669.9453 1035.9945,1669.9453 C1035.9945,1669.9453 1035.9945,1681.3938 1031.9945,1681.3938 L973.5781,1681.3938 C969.5781,1681.3938 969.5781,1669.9453 969.5781,1669.9453 C969.5781,1669.9453 969.5781,1658.4969 973.5781,1658.4969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.4;"/><path d="M1031.9945,1658.4969 C1027.9945,1658.4969 1027.9945,1669.9453 1027.9945,1669.9453 C1027.9945,1681.3938 1031.9945,1681.3938 1031.9945,1681.3938" fill="none" style="stroke:#181818;stroke-width:0.4;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="50.4164" x="973.5781" y="1674.5828">RabbitMQ</text></g><g class="participant participant-head" data-participant="sagaDB"><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="56.0383" x="1043.9945" y="95.7828">Saga Store</text><path d="M1060.0137,54.8969 C1060.0137,46.8969 1074.4137,46.8969 1074.4137,46.8969 C1074.4137,46.8969 1088.8137,46.8969 1088.8137,54.8969 L1088.8137,75.6969 C1088.8137,83.6969 1074.4137,83.6969 1074.4137,83.6969 C1074.4137,83.6969 1060.0137,83.6969 1060.0137,75.6969 L1060.0137,54.8969" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.2;"/><path d="M1060.0137,54.8969 C1060.0137,62.8969 1074.4137,62.8969 1074.4137,62.8969 C1074.4137,62.8969 1088.8137,62.8969 1088.8137,54.8969" fill="none" style="stroke:#181818;stroke-width:1.2;"/></g><g class="participant participant-tail" data-participant="sagaDB"><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="56.0383" x="1043.9945" y="1670.5828">Saga Store</text><path d="M1060.0137,1681.3938 C1060.0137,1673.3938 1074.4137,1673.3938 1074.4137,1673.3938 C1074.4137,1673.3938 1088.8137,1673.3938 1088.8137,1681.3938 L1088.8137,1702.1938 C1088.8137,1710.1938 1074.4137,1710.1938 1074.4137,1710.1938 C1074.4137,1710.1938 1060.0137,1710.1938 1060.0137,1702.1938 L1060.0137,1681.3938" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.2;"/><path d="M1060.0137,1681.3938 C1060.0137,1689.3938 1074.4137,1689.3938 1074.4137,1689.3938 C1074.4137,1689.3938 1088.8137,1689.3938 1088.8137,1681.3938" fill="none" style="stroke:#181818;stroke-width:1.2;"/></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="123.9102"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="123.9102" y2="123.9102"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="126.3102" y2="126.3102"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="37.784" x="541.5244" y="114.5938"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="23.6945" x="546.3244" y="129.0164">Start</text><g class="message" data-participant-1="user" data-participant-2="client"><polygon fill="#181818" points="93.5699,158.2594,101.5699,161.4594,93.5699,164.6594,96.7699,161.4594" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="18.2234" x2="98.3699" y1="161.4594" y2="161.4594"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="65.7465" x="27.8234" y="157.2492">Click "Borrow"</text></g><g class="message" data-participant-1="client" data-participant-2="gw"><polygon fill="#181818" points="309.3289,183.2922,317.3289,186.4922,309.3289,189.6922,312.5289,186.4922" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="103.1699" x2="314.1289" y1="186.4922" y2="186.4922"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="196.559" x="112.7699" y="182.282">POST /borrow {readerId, bookId, dueDate}</text></g><g class="message" data-participant-1="gw" data-participant-2="orch"><polygon fill="#181818" points="443.5992,208.325,451.5992,211.525,443.5992,214.725,446.7992,211.525" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="318.9289" x2="448.3992" y1="211.525" y2="211.525"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="75.7199" x="348.2041" y="207.3148">Forward request</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,233.3578,1072.8137,236.5578,1064.8137,239.7578,1068.0137,236.5578" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="236.5578" y2="236.5578"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="265.9211" x="630.8459" y="232.3477">INSERT saga(started, sagaId, readerId, bookId, dueDate)</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="260.2742"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="260.2742" y2="260.2742"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="262.6742" y2="262.6742"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="141.8297" x="489.5016" y="250.9578"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="127.7402" x="494.3016" y="265.3805">Step 1: Reserve inventory</text><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,294.6234,1001.1863,297.8234,993.1863,301.0234,996.3863,297.8234" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="297.8234" y2="297.8234"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="256.0797" x="599.9529" y="293.6133">Command: inventory.reserve (sagaId, bookId, readerId)</text></g><g class="message" data-participant-1="mq" data-participant-2="inv"><polygon fill="#181818" points="577.0691,319.6563,569.0691,322.8563,577.0691,326.0563,573.8691,322.8563" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="572.2691" x2="1001.9863" y1="322.8563" y2="322.8563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="770.2096" y="318.6461">deliver</text></g><g class="message" data-participant-1="inv" data-participant-2="mq"><polygon fill="#181818" points="993.1863,344.6891,1001.1863,347.8891,993.1863,351.0891,996.3863,347.8891" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="568.2691" x2="997.9863" y1="347.8891" y2="347.8891"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="250.2957" x="660.3799" y="343.6789">Event: inventory.copy-reserved (sagaId, reservationId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,369.7219,453.9992,372.9219,461.9992,376.1219,458.7992,372.9219" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="372.9219" y2="372.9219"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="368.7117">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,394.7547,1072.8137,397.9547,1064.8137,401.1547,1068.0137,397.9547" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="397.9547" y2="397.9547"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="247.4012" x="640.1059" y="393.7445">UPDATE saga SET state=Reserved, reservationId=...</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="421.6711"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="421.6711" y2="421.6711"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="424.0711" y2="424.0711"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="123.8887" x="498.4721" y="412.3547"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="109.7992" x="503.2721" y="426.7773">Step 2: Create lending</text><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,456.0203,1001.1863,459.2203,993.1863,462.4203,996.3863,459.2203" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="459.2203" y2="459.2203"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="286.7465" x="584.6195" y="455.0102">Command: lending.create (sagaId, readerId, bookId, dueDate)</text></g><g class="message" data-participant-1="mq" data-participant-2="lend"><polygon fill="#181818" points="679.6922,481.0531,671.6922,484.2531,679.6922,487.4531,676.4922,484.2531" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="674.8922" x2="1001.9863" y1="484.2531" y2="484.2531"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="821.5211" y="480.043">deliver</text></g><g class="message" data-participant-1="lend" data-participant-2="mq"><polygon fill="#181818" points="993.1863,506.0859,1001.1863,509.2859,993.1863,512.4859,996.3863,509.2859" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="670.8922" x2="997.9863" y1="509.2859" y2="509.2859"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="192.527" x="740.5758" y="505.0758">Event: lending.created (sagaId, lendingId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,531.1188,453.9992,534.3188,461.9992,537.5188,458.7992,534.3188" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="534.3188" y2="534.3188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="530.1086">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,556.1516,1072.8137,559.3516,1064.8137,562.5516,1068.0137,559.3516" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="559.3516" y2="559.3516"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="258.9996" x="634.3066" y="555.1414">UPDATE saga SET state=LendingCreated, lendingId=...</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="583.068"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="583.068" y2="583.068"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="585.468" y2="585.468"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="150.4777" x="485.1775" y="573.7516"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="136.3883" x="489.9775" y="588.1742">Step 3: Confirm reservation</text><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,617.4172,1001.1863,620.6172,993.1863,623.8172,996.3863,620.6172" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="620.6172" y2="620.6172"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="239.8754" x="608.0551" y="616.407">Command: inventory.confirm (sagaId, reservationId)</text></g><g class="message" data-participant-1="mq" data-participant-2="inv"><polygon fill="#181818" points="577.0691,642.45,569.0691,645.65,577.0691,648.85,573.8691,645.65" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="572.2691" x2="1001.9863" y1="645.65" y2="645.65"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="770.2096" y="641.4398">deliver</text></g><g class="message" data-participant-1="inv" data-participant-2="mq"><polygon fill="#181818" points="993.1863,667.4828,1001.1863,670.6828,993.1863,673.8828,996.3863,670.6828" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="568.2691" x2="997.9863" y1="670.6828" y2="670.6828"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="219.0754" x="675.99" y="666.4727">Event: inventory.reservation-confirmed (sagaId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,692.5156,453.9992,695.7156,461.9992,698.9156,458.7992,695.7156" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="695.7156" y2="695.7156"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="691.5055">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,717.5484,1072.8137,720.7484,1064.8137,723.9484,1068.0137,720.7484" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="720.7484" y2="720.7484"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="170.2238" x="678.6945" y="716.5383">UPDATE saga SET state=Confirmed</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="744.4648"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="744.4648" y2="744.4648"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="746.8648" y2="746.8648"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="183.384" x="468.7244" y="735.1484"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="169.2945" x="473.5244" y="749.5711">Optional: Payment (if deposit/fine)</text><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,778.8141,1001.1863,782.0141,993.1863,785.2141,996.3863,782.0141" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="782.0141" y2="782.0141"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="254.3531" x="600.8162" y="777.8039">Command: payment.charge (sagaId, amount, readerId)</text></g><g class="message" data-participant-1="mq" data-participant-2="pay"><polygon fill="#181818" points="781.3801,803.8469,773.3801,807.0469,781.3801,810.2469,778.1801,807.0469" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="776.5801" x2="1001.9863" y1="807.0469" y2="807.0469"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="872.365" y="802.8367">deliver</text></g><g class="message" data-participant-1="pay" data-participant-2="mq"><polygon fill="#181818" points="993.1863,828.8797,1001.1863,832.0797,993.1863,835.2797,996.3863,832.0797" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="772.5801" x2="997.9863" y1="832.0797" y2="832.0797"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="211.0063" x="782.1801" y="827.8695">Event: payment.captured (sagaId, paymentId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,853.9125,453.9992,857.1125,461.9992,860.3125,458.7992,857.1125" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="857.1125" y2="857.1125"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="852.9023">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,878.9453,1072.8137,882.1453,1064.8137,885.3453,1068.0137,882.1453" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="882.1453" y2="882.1453"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="275.1582" x="626.2273" y="877.9352">UPDATE saga SET paymentId=..., state=PaymentCaptured</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="905.8617"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="905.8617" y2="905.8617"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="908.2617" y2="908.2617"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="61.4734" x="529.6797" y="896.5453"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="47.384" x="534.4797" y="910.968">Complete</text><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,940.2109,1072.8137,943.4109,1064.8137,946.6109,1068.0137,943.4109" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="943.4109" y2="943.4109"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="249.148" x="639.2324" y="939.2008">UPDATE saga SET state=Completed, endedAt=now()</text></g><g class="message" data-participant-1="orch" data-participant-2="gw"><polygon fill="#181818" points="327.7289,965.2438,319.7289,968.4438,327.7289,971.6438,324.5289,968.4438" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;stroke-dasharray:2.0,2.0;" x1="322.9289" x2="452.3992" y1="968.4438" y2="968.4438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="115.0703" x="328.5289" y="964.2336">201 Created { lendingId }</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="992.1602"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="992.1602" y2="992.1602"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="994.5602" y2="994.5602"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="159.1309" x="480.851" y="982.8438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="145.0414" x="485.651" y="997.2664">Failure paths (compensation)</text><path d="M272.6477,1016.6766 L412.0992,1016.6766 L412.0992,1024.1094 L404.0992,1032.1094 L272.6477,1032.1094 L272.6477,1016.6766" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.2;"/><rect fill="none" height="215.6953" style="stroke:#000000;stroke-width:1.2;" width="840.1852" x="272.6477" y="1016.6766"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="103.4516" x="284.6477" y="1028.6992">If lending.create fails</text><g class="message" data-participant-1="lend" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1047.5422,1001.1863,1050.7422,993.1863,1053.9422,996.3863,1050.7422" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="670.8922" x2="997.9863" y1="1050.7422" y2="1050.7422"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="216.7902" x="728.4441" y="1046.532">Event: lending.create-rejected (sagaId, reason)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,1072.575,453.9992,1075.775,461.9992,1078.975,458.7992,1075.775" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="1075.775" y2="1075.775"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="1071.5648">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1097.6078,1001.1863,1100.8078,993.1863,1104.0078,996.3863,1100.8078" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="1100.8078" y2="1100.8078"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="239.8906" x="608.0475" y="1096.5977">Command: inventory.release (sagaId, reservationId)</text></g><g class="message" data-participant-1="mq" data-participant-2="inv"><polygon fill="#181818" points="577.0691,1122.6406,569.0691,1125.8406,577.0691,1129.0406,573.8691,1125.8406" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="572.2691" x2="1001.9863" y1="1125.8406" y2="1125.8406"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="770.2096" y="1121.6305">deliver</text></g><g class="message" data-participant-1="inv" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1147.6734,1001.1863,1150.8734,993.1863,1154.0734,996.3863,1150.8734" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="568.2691" x2="997.9863" y1="1150.8734" y2="1150.8734"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="213.3066" x="678.8744" y="1146.6633">Event: inventory.reservation-released (sagaId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,1172.7063,453.9992,1175.9063,461.9992,1179.1063,458.7992,1175.9063" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="1175.9063" y2="1175.9063"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="1171.6961">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,1197.7391,1072.8137,1200.9391,1064.8137,1204.1391,1068.0137,1200.9391" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="1200.9391" y2="1200.9391"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="202.8965" x="662.3582" y="1196.7289">UPDATE saga SET state=Failed, reason=...</text></g><g class="message" data-participant-1="orch" data-participant-2="gw"><polygon fill="#181818" points="327.7289,1222.7719,319.7289,1225.9719,327.7289,1229.1719,324.5289,1225.9719" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;stroke-dasharray:2.0,2.0;" x1="322.9289" x2="452.3992" y1="1225.9719" y2="1225.9719"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="102.3344" x="334.8969" y="1221.7617">409 Conflict { reason }</text></g><path d="M272.6477,1243.5719 L534.609,1243.5719 L534.609,1251.0047 L526.609,1259.0047 L272.6477,1259.0047 L272.6477,1243.5719" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.2;"/><rect fill="none" height="315.8266" style="stroke:#000000;stroke-width:1.2;" width="840.1852" x="272.6477" y="1243.5719"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="225.9613" x="284.6477" y="1255.5945">If inventory.confirm fails after lending.created</text><g class="message" data-participant-1="inv" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1274.4375,1001.1863,1277.6375,993.1863,1280.8375,996.3863,1277.6375" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="568.2691" x2="997.9863" y1="1277.6375" y2="1277.6375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="230.6383" x="670.2086" y="1273.4273">Event: inventory.confirm-rejected (sagaId, reason)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,1299.4703,453.9992,1302.6703,461.9992,1305.8703,458.7992,1302.6703" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="1302.6703" y2="1302.6703"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="1298.4602">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1324.5031,1001.1863,1327.7031,993.1863,1330.9031,996.3863,1327.7031" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="1327.7031" y2="1327.7031"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="209.2797" x="623.3529" y="1323.493">Command: lending.cancel (sagaId, lendingId)</text></g><g class="message" data-participant-1="mq" data-participant-2="lend"><polygon fill="#181818" points="679.6922,1349.5359,671.6922,1352.7359,679.6922,1355.9359,676.4922,1352.7359" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="674.8922" x2="1001.9863" y1="1352.7359" y2="1352.7359"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="821.5211" y="1348.5258">deliver</text></g><g class="message" data-participant-1="lend" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1374.5688,1001.1863,1377.7688,993.1863,1380.9688,996.3863,1377.7688" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="670.8922" x2="997.9863" y1="1377.7688" y2="1377.7688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="153.7859" x="759.9463" y="1373.5586">Event: lending.cancelled (sagaId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,1399.6016,453.9992,1402.8016,461.9992,1406.0016,458.7992,1402.8016" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="1402.8016" y2="1402.8016"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="1398.5914">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1424.6344,1001.1863,1427.8344,993.1863,1431.0344,996.3863,1427.8344" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="1427.8344" y2="1427.8344"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="239.8906" x="608.0475" y="1423.6242">Command: inventory.release (sagaId, reservationId)</text></g><g class="message" data-participant-1="mq" data-participant-2="inv"><polygon fill="#181818" points="577.0691,1449.6672,569.0691,1452.8672,577.0691,1456.0672,573.8691,1452.8672" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="572.2691" x2="1001.9863" y1="1452.8672" y2="1452.8672"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="770.2096" y="1448.657">deliver</text></g><g class="message" data-participant-1="inv" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1474.7,1001.1863,1477.9,993.1863,1481.1,996.3863,1477.9" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="568.2691" x2="997.9863" y1="1477.9" y2="1477.9"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="213.3066" x="678.8744" y="1473.6898">Event: inventory.reservation-released (sagaId)</text></g><g class="message" data-participant-1="mq" data-participant-2="orch"><polygon fill="#181818" points="461.9992,1499.7328,453.9992,1502.9328,461.9992,1506.1328,458.7992,1502.9328" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="457.1992" x2="1001.9863" y1="1502.9328" y2="1502.9328"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.6363" x="712.6746" y="1498.7227">deliver</text></g><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,1524.7656,1072.8137,1527.9656,1064.8137,1531.1656,1068.0137,1527.9656" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="1527.9656" y2="1527.9656"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="202.8965" x="662.3582" y="1523.7555">UPDATE saga SET state=Failed, reason=...</text></g><g class="message" data-participant-1="orch" data-participant-2="gw"><polygon fill="#181818" points="327.7289,1549.7984,319.7289,1552.9984,327.7289,1556.1984,324.5289,1552.9984" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;stroke-dasharray:2.0,2.0;" x1="322.9289" x2="452.3992" y1="1552.9984" y2="1552.9984"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="102.3344" x="334.8969" y="1548.7883">409 Conflict { reason }</text></g><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8;" width="1120.8328" x="0" y="1582.3148"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="1582.3148" y2="1582.3148"/><line style="stroke:#000000;stroke-width:0.8;" x1="0" x2="1120.8328" y1="1584.7148" y2="1584.7148"/><rect fill="#EEEEEE" height="20.2328" style="stroke:#000000;stroke-width:1.6;" width="60.3156" x="530.2586" y="1572.9984"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="46.2262" x="535.0586" y="1587.4211">Timeouts</text><g class="message" data-participant-1="orch" data-participant-2="sagaDB"><polygon fill="#181818" points="1064.8137,1616.6641,1072.8137,1619.8641,1064.8137,1623.0641,1068.0137,1619.8641" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="1069.6137" y1="1619.8641" y2="1619.8641"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="134.1031" x="696.7549" y="1615.6539">periodically scan for timeouts</text></g><g class="message" data-participant-1="orch" data-participant-2="mq"><polygon fill="#181818" points="993.1863,1641.6969,1001.1863,1644.8969,993.1863,1648.0969,996.3863,1644.8969" style="stroke:#181818;stroke-width:0.8;"/><line style="stroke:#181818;stroke-width:0.8;" x1="453.1992" x2="997.9863" y1="1644.8969" y2="1644.8969"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="192.5066" x="631.7395" y="1640.6867">emit compensation commands as needed</text></g><!--SRC=[xLRRRjim37ttLn3PIuAjsVLb1J8WJRijmBPsJVi1Z4sdMct9bPGQmR1_7oNBiPosItTvN5u2IOU7v255sGfR49pgz8gCrMWfWmMk40xWI6cjQgY5lO9pCgHlqGebOVWHgse35VB-KvYfiY9f_94P9Ocv5h92ZIKiCRrUQRMMsKmLIiEJtFyYXA6RDScKFfCnkA9f8LOIKfAMT8JIP2hcRb57LAXwwaEpUaqntHLcgXPo1JaMXf84Kyj-BpbqG0Dh_ayOQKKgAfGM1hD2i3Eud0_SUUfNVSJqR0uVM9GQDnwpgllddqXcpc6ddz8Ug7YZ3vtBMwPNUWCBbbAav752tjxF68CAtkkZpd1Jkj1ZL8MRXFLS4mpESRaKzlDNlr_U91bQNABX4r_R1OVHsB2WU7oK99C9Rx83c4mIfnCSl0jwm26mJEar39f-62HXdn6hca_FJXSNy7pPDCjtJPYHdcVFOAdKjVlFrdJC2lv86CqsJXYsUgzqZJhZudB8nYP-cu-RW1Wm_x8uER_mww5neH5pkPNZVD3BAAH25Rmy35rBJkGWFQVNUYflN6ggB55cXnrah8FHi7NMkcYTZX8sPG8sOOQC2d7BZULMBUk9uuevKrLj3W9nrZ7hxbPrj46WblUEC9TdnzEB4x-6nGahP3dlIKXrbtGo7eyxILvnmfo59TzHhiiUr2C0ncc37pv2-IPyPnY5xvSxklIv8pt2mTzg4QvGasfCsrVZjKjNvaANiMQFQP4qcFswaB_H7v7zGI3lTFaxCMOjdK_yj78-iE1h6oR8KEHCMIaZxFDSI1ezB43Lc8pJAzIhg2Umv25lxruGnaVnkjME05j2hEnQnvqGJluy-Is1g_cpe4N8UHRSUKNS-rKGjtYKzbv96nEEapkBigcTI5KFHy6-7OolNhmCros3xrqJmW_lzpsAWeFmpwY1OHezexu4xkMiO9xltiISxKm2iFzYyS3vHgdj3nmqpC_czweAi7yu5kJUaOSwloNkzpx0exi_E8YQVs-iUwhbXAPjxdu4jBPjfTwyUEj70RzpbalL8BbExjdj2d7t_ljQ0ERylR8xrFRb72Z-NOss_f4_g8fxPshBk3EYz_IIvoj-goB_ksVRFNpJBqH9QctDlHEc8YrK9b8iYWqO5Xjo_cIrmQG_YAaK5k91uHPEO-C-vIGHpwBa9m00]--></g></svg>